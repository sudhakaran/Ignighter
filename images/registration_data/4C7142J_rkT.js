/*1299108520,176820406*/

if (window.CavalryLogger) { CavalryLogger.start_js(["Z0NSX"]); }

if(!window.FB)FB={};FB.Registration={init:function(a){FB.Registration._appID=a.appID;Event.listen(a.form,'submit',FB.Registration.registerClick);Event.listen(a.form,'submit',FB.Registration.submitHandler);ConnectLogin.init(a);},fillFormAgain:function(){FB.Registration.registerUnclick();CSS.hide('fbRegistrationDisabled');CSS.show('fbRegistrationEnabled');},showEnablePlatformPopup:function(){PlatformOptInPopup.open('registration','opt.in',{app_id:FB.Registration._appID});},showClearDialog:function(){if(!CSS.hasClass('fbRegistrationClearBox','hidden_elem')){FB.Registration.hideClearDialog();return;}var c=DOM.find(document,'.fbRegistrationNameField');var b=$('fbRegistrationClearBoxContent');var a=$('fbRegistrationClearBoxArrow');CSS.show('fbRegistrationClearBox');a.style.top=(c.offsetTop+8)+'px';a.style.left=(c.offsetLeft+c.offsetWidth-17)+'px';b.style.top=(c.offsetTop+16)+'px';b.style.left=(c.offsetLeft+c.offsetWidth-b.offsetWidth)+'px';},hideClearDialog:function(){CSS.hide($('fbRegistrationClearBox'));},registerUnclick:function(){if($('fbRegistrationRegisterButtonPrefilled')){CSS.hide($('fbLoadingIndicatorPrefilled'));CSS.show($('fbRegistrationFacepileSection'));CSS.removeClass('fbRegistrationRegisterButtonPrefilled','uiButtonDisabled');}if($('fbRegistrationRegisterButton')){CSS.hide($('fbLoadingIndicator'));CSS.removeClass('fbRegistrationRegisterButton','uiButtonDisabled');}return true;},registerClick:function(a){if($('fbRegistrationRegisterButtonPrefilled')){CSS.hide($('fbRegistrationFacepileSection'));CSS.show($('fbLoadingIndicatorPrefilled'));CSS.addClass('fbRegistrationRegisterButtonPrefilled','uiButtonDisabled');}if($('fbRegistrationRegisterButton')){CSS.show($('fbLoadingIndicator'));CSS.addClass('fbRegistrationRegisterButton','uiButtonDisabled');}},clearForm:function(){FB.Registration.registerUnclick();FB.Registration.hideClearDialog();CSS.hide($('fbRegistrationEnabled'));CSS.show($('fbRegistrationDisabled'));},submitPrefilled:function(){if(FB.Registration.stopSubmit){FB.Registration.stopSubmit=false;return false;}FB.Registration.confirmed=true;FB.Registration.submit({target:$("fbRegistrationEnabledForm")});},submit:function(a){if(!FB.Registration.submitHandler(a))return false;Form.bootstrap(a.target);FB.Registration.registerClick();},confirm:function(){FB.Registration.registerUnclick();var a=WindowComm.makeHandler(function(c){FB.Registration.confirmed=false;if(FB.Registration._popup){FB.Registration._popup.close();FB.Registration._popup=null;}if(c.button=='ok')FB.Registration.submitPrefilled();});var b=(new URI('/dialog/registration')).setQueryData({app_id:FB.Registration._appID,display:'popup',redirect_uri:a});FB.Registration._popup=PopupResizer.open(b.toString(),150,500);return false;},submitHandler:function(event){var a=true;if(event.target===$("fbRegistrationEnabledForm")&&FB.Registration.mustConfirm&&!FB.Registration.confirmed){a=FB.Registration.confirm();}else if(FB.Registration.mustDoValidation)a=FB.Registration.doXDValidationOnSubmit(event.target);if(a)FB.Registration._noSubmit.each(function(b){DOM.remove(b.parentNode.parentNode);});return a;},login:function(){ConnectLogin.login(FB.Registration._loginSuccess,null,{social_plugin:'registration',external_page_url:URI.getRequestURI().toString(),skip_api_login:1});},logout:function(){ConnectLogin.logout();},_loginSuccess:function(){XD.send({type:'authLogin'});setTimeout('window.location.reload()',300);},authLogout:function(a){XD.send({type:'authLogout'});setTimeout(function(){window.location.href=a;},100);},glueInputAndSaveBoxes:function(a,b){var c=function(d){CSS.show(b);};Event.listen(a,'focus',c);Event.listen(a,'change',c);},noSubmit:function(a){FB.Registration._noSubmit.push(a);},serialize:function(d,b){var a=Form.serialize(d);var c={};var e=function(f){return DOM.find(d,'*[name="'+f+'"]');};b.each(function(i){var g=e(i);if(!g){var h=e(i+'_month');var f=e(i+'_day');var j=e(i+'_year');if(h&&f&&j)c[i]=h.value+'/'+f.value+'/'+j.value;}else if(g.type=="checkbox"){c[i]=a[i]==='on'?true:false;}else if(CSS.hasClass(g,'fbRegistrationPageCategoryField')){c[i]={id:e(i+'_pageid').value,name:a[i]};}else c[i]=a[i];});return c;},doXDValidation:function(b){var a=FB.Registration.serialize(b,FB.Registration._customFields);var c=(Math.random()*(1<<30)).toString(16).replace('.','');XD.send({type:'validate',value:JSON.stringify(a),id:c});FB.Registration._callbackMetadata[c]={form:b};return c;},doXDValidationOnSubmit:function(a){var b=FB.Registration.doXDValidation(a);FB.Registration._callbackMetadata[b].submitted=true;(function(){if(FB.Registration._callbackMetadata[b])FB.Registration.submit({target:a});}).defer(20000);return false;},setXDValidation:function(b,a){FB.Registration.mustDoValidation=true;FB.Registration._customFields=a;Form.getElements(b).each(function(c){Event.listen(c,'blur',function(){FB.Registration.doXDValidation(b);});});Arbiter.subscribe('Connect.Unsafe.Registration.Validation',function(event,j){var h=FB.Registration._callbackMetadata[j.id];if(!h||h.form!=b)return;delete FB.Registration._callbackMetadata[j.id];var f=j.errors;a.each(function(m){var l=DOM.find(b,'.'+m+'_error');if(l)CSS.hide(l.parentNode);});if(!f){if(h.submitted){FB.Registration.mustDoValidation=false;return FB.Registration.submit({target:b});}return;}if(typeof f!=="object")console.log('Invalid validation function output. '+'Return an object with keys being the bad field names, '+'and values being the error messages.');var i;var c=FB.Registration.serialize(b,a);for(i in f){var d=f[i];var g=DOM.find(b,'*[name="'+i+'"]');if(!h.submitted)if(typeof c[i]=='string'){if(!c[i]){continue;}else if(!g&&c[i]=='-1/-1/-1'){continue;}else if(g&&CSS.hasClass(g,'fbRegistrationSelectorField')&&c[i]=='-1')continue;}else if(c[i].id==='')continue;var e=DOM.find(b,'.'+(i+'_error'));if(!e){console.log('Not a custom field name: '+i);return;}var k=document.createTextNode(d);DOM.setContent(e,k);CSS.show(e.parentNode);}if(h.submitted){for(i in f)if(f[i])return FB.Registration.registerUnclick();FB.Registration.mustDoValidation=false;return FB.Registration.submit({target:b});}});},confirmed:false,stopSubmit:false,mustConfirm:true,mustDoValidation:false,_appID:null,_popup:null,_customFields:{},_callbackMetadata:{},_noSubmit:[]};

if (window.Bootloader) { Bootloader.done(["Z0NSX"]); }